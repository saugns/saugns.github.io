<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
	<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
	<meta name='viewport' content='width=device-width, initial-scale=1.0' />
	<meta name='description'
content="Usage of the saugns program." />
	<meta name='keywords'
content="saugns, command-line, help" />
	<link rel='stylesheet' href='style.css' type='text/css' title='Default' /><style type='text/css'>@import url("style.css");</style>
<title>saugns usage</title>
</head>
<body>
<div class='nav'><img src="images/sau-logo88x50.png" alt=" " style="float: right" />
Back to <a href='index.html'>main page</a>.
</div>
<h1>Usage of the saugns program</h1>
<p>Usage examples for the
<a href='index.html#saugns'>saugns</a> program,
and some further notes. For the script language SAU,
see the <a href='language.html'>language</a> page, or
the <a href='https://github.com/saugns/saugns/blob/stable/doc/README.SAU'>doc/README.SAU</a> file (GitHub view).
</p>
<p>Running the program with no arguments, or with <code>-h</code>,
prints a concise list of arguments and invocation types supported.
The same information, and a bit more, is provided with the accompanying
<code>saugns(1)</code> man page.
</p>
<div class='toc'>
<h2 id='contents'>Contents</h2>
<ul>
<li><a href='#playing'>Playing scripts or strings</a><ul>
	<li><a href='#AUDIODEV'>Changing system audio device</a></li>
	<li><a href='#mono'>Stereo or mono downmix?</a></li>
	</ul>
</li>
<li><a href='#checking'>Checking scripts</a></li>
<li><a href='#writing'>Writing audio files</a><ul>
	<li><a href='#fileformats'>Other file formats</a></li>
	</ul>
</li>
<li><a href='#stdout'>Piping raw audio to stdout</a></li>
<li><a href='#shebang'>Files with shebangs</a></li>
</ul>
</div>
<h2 id='playing'>Playing scripts or strings</h2>
<p>To simply play a script, using the default sample rate (96000 Hz):
</p>
<pre>saugns script</pre>
<p>(Several filenames can be listed, or a <code>*</code> glob pattern used,
to play several files one after the other.)
</p>
<p>To play a one-liner (in this example,
sweeping through the human hearing range in 10 seconds):
</p>
<pre>saugns -e "Osin f20 f{g20000 rexp} t10 a0.25"</pre>
<p>(Several string arguments can be listed when <code>-e</code> is used,
each of which plays as a separate script.)
</p>
<p>Sample rate in Hz can be changed using the <code>-r</code> option:
</p>
<pre>saugns -r 48000 script(s)</pre>
<h3 id='AUDIODEV'>Changing system audio device</h3>
<p>The option of which system audio device name or path is used (for ALSA, OSS, etc.) by saugns can be changed by setting the <code>AUDIODEV</code>
environment variable, similarly to how other software supports this option:
</p>
<pre>export AUDIODEV=value</pre>
<p>...where instead of <code>value</code> something is inserted to
replace e.g. <code>default</code> for ALSA or sndio, or <code>/dev/dsp</code> for OSS.
</p>
<p>See the man page for notes on compatibility support for differently named environment variables specific to one or another system standard.
</p>
<h3 id='mono'>Stereo or mono downmix?</h3>
<p>By default, both system audio output and any other output(s) are stereo, whether or not any sounds in a script differ between the channels. (See the SAU <a href='language.html#channels'>channel</a> features for how to place things in stereo.) This can be changed by adding the <code>--mono</code> option, to downmix all outputs to mono.
</p>
<h2 id='checking'>Checking scripts</h2>
<p>To simply check if scripts parse cleanly (no errors or warnings),
use the <code>-c</code> option:
</p>
<pre>saugns -c examples/*.sau examples/*/*.sau</pre>
<p>To print info for scripts based on a parse
(duration, number of voices, and a partial
debug info listing of what the script does):
</p>
<pre>saugns -cp script(s)</pre>
<p>(The <code>-c</code> can be left out to also play.)
</p>
<h2 id='writing'>Writing audio files</h2>
<p>To write a 16-bit stereo PCM WAV file
named "a.wav" containing all of the audio from script(s):
</p>
<pre>saugns -o a.wav script(s)</pre>
<p>By default, writing a file makes the program run silent instead of playing scripts. This can be changed by adding the <code>-a</code> (audible) option, to also produce output for system audio.
</p>
<p>Note that the default sample rate is 96000 Hz. It can be changed by using the <code>-r</code> option, as in the following example which uses CD quality sample rate. Note however that if you want to minimize aliasing distortion for sounds with too-wide frequency spectrums, it's best to instead write a WAV file with a higher sample rate and then use a separate tool to downsample with quality if you want a lower final sample rate.
</p>
<pre>saugns -r 44100 -o a.wav script(s)</pre>
<p>The <a href='#mono'><code>--mono</code> option</a> can be added to downmix to mono and write a mono file. For WAV files containing only mono sounds, this halves the space usage. (But external compression tools and formats, like flac, can losslessly compress away stereo duplication anyway.)
</p>
<h3 id='fileformats'>Other file formats</h3>
<p>It's also possible to produce AU files by using <code>-</code>
(for stdout) as the filename, as a special case. When streaming a
file, only AU among the well-recognized simple formats allows the
length to be unspecified in the header &ndash; at least portably.
As WAV is more common, it remains the format used in other cases.
</p>
<pre>saugns -o - script(s) &gt; a.au</pre>
<p>If you need further format conversion or editing of WAV files,
AU files or streams, or raw audio data, other tools will be needed.
For example,
<a href="http://sox.sourceforge.net/Main/HomePage">SoX</a> and
<a href="http://www.eca.cx/ecasound/index.php">Ecasound</a> are
both capable command-line tools (unrelated to this project).
It's also possible to send audio data to those and other tools
<a href='#stdout'>raw over stdout</a> instead of with a format.
</p>
<p>AU over stdout is the most convenient way to interface with some external
programs without using temporary files. For example, SoX can recognize audio
format settings (number of bits, channels, sample rate) using the AU header,
instead of having to duplicate those as command-line arguments, as is needed
when piping raw audio over stdout. It's easy to use to e.g. write to a flac:
(SoX supports many formats and can pick one to use by the filename entered.)
</p>
<pre>saugns -o - script(s) | sox - a.flac</pre>
<h2 id='stdout'>Piping raw audio to stdout</h2>
<p>For interfacing with other programs that accept raw 16-bit audio data,
the <code>--stdout</code> option can be added to copy audio to stdout. If
options for <a href='#playing'>playing scripts</a> are used, system audio
is still on by default. But if <a href='#writing'>writing a WAV file</a>,
running muted is still the default. This can as usual be changed with the
options to run audible (<code>-a</code>) and run muted (<code>-m</code>).
</p>
<p>When system audio output is produced, the copying to stdout is done in
parallel, at the same limited pace. This may be desirable for programs to
visualize an audio stream, for example for a live spectrogram. But if the
program running in parallel takes too much CPU time to do its work, there
is the risk of stuttering. Experimenting to see how well it works for the
system and configuration is best.
</p>
<p>An alternative to raw data exists, for sending audio with an AU format
header over stdout. This uses the file output option <code>-o</code> with
<a href='#fileformats'><code>-</code> as the filename</a>. Both cannot be
used at the same time.
</p>
<h2 id='shebang'>Files with shebangs</h2>
<p>As with shell scripts and various other types of scripts, a Unix shebang can be used for SAU scripts. Placing <code>#!</code> at the very beginning of a script, followed by the full path to the installed saugns binary, makes the file run using saugns when the file is used by itself as if it were a program. This also requires the script file to have the execute permission set (as in <code>chmod +x filename</code>).
</p>
<p>This is generally most useful for creating sound-playing files &ndash; and saugns gets going producing audio very fast when such a file is launched. The shebang line on top can optionally include e.g. a specific playback sample rate to use for the script, as it does in the following example (where 48000 Hz is set).
</p>
<pre>
#!/usr/local/bin/saugns -r48000
</pre>
<p>Of course, other arguments could be included after the path to saugns to instead make the script do something like (also) print info about itself, or write to some WAV file path included in the shebang line.
</p>
<div class='footer'>Text available under version 4.0 of <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons BY-SA" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>.
</div>
</body>
</html>
