<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
	<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
	<meta name='description'
content="Syntax of the SAU (Scriptable AUdio) language." />
	<meta name='keywords'
content="saugns, SAU language, script syntax" />
<title>SAU syntax</title>
</head>
<body>
<h1>SAU language syntax</h1>
<p>A brief overview of how to use the syntax of the SAU language
provided by the <a href='index.html#saugns'>saugns</a> program.
It does not cover everything.
A systematic, concise reference can be found in the <a href='https://github.com/saugns/saugns/blob/master/README'>README file</a> (GitHub view).
(For usage of the command-line program,
see the <a href='usage.html'>usage</a> page.)
</p>
<p>Note that this describes the version provided by the git
<a href='https://github.com/saugns/saugns'>master branch</a>
(what you get with a `git clone https://github.com/saugns/saugns.git`).
</p>
<h2 id='output'>Generating sound</h2>
<p>To generate a single pure tone in the SAU language:
</p>
<pre>Osin f440 p0 a0.5 t1</pre>
<p>In this case, frequency is set to 440 Hz, phase to 0% of the wave cycle,
and amplitude to 0.5 (-6dB). The time duration will be 1 second.
</p>
<p>The "<tt>O</tt>" adds an oscillator (also called an "operator" in FM synth
terminology). It is followed by a wave type value, in this case "<tt>sin</tt>"
(there's also "<tt>tri</tt>", "<tt>sqr</tt>", "<tt>saw</tt>", and more).
The other parameters are named, but not ordered, and any which are left out
will be given default values. (All of them could be left out,
for the shortest script which generates audio: "<tt>Osin</tt>".)
</p>
<p>To generate a cosine, use the "<tt>sin</tt>" wave type and
set phase to 25% of the wave cycle with "<tt>p0.25</tt>".
</p>
<p>Oscillators can be used in a nested way,
as in this example which uses PM (phase modulation):
</p>
<pre>
// Generate 10 seconds of "engine rumble"
Osin f137 t10 p+[
	Osin f32 p+[
		Osin f42
	]
]
</pre>
<p>The oscillators with frequency 32 Hz and 42 Hz are linked in a chain
which ends at the carrier (with frequency 137 Hz), and play when it does.
The "<tt>p+</tt>" means "add to the phase", which is what PM does.
</p>
<h3>Timing</h3>
<p>A "<tt>|</tt>" separates that before and that after in time,
while "<tt>\</tt>" (followed by a time in seconds)
adds delay independently of that.
</p>
<p>To generate two tones, separated in time,
and also insert an extra 2.5 seconds of silence in-between them:
</p>
<pre>
Osin f440 t2
|\2.5

Osin f220 t2
</pre>
<p>Parameters for an oscillator can also be changed
after a time duration without affecting surrounding timing,
adding a new time duration for which the new values apply.
This uses the "<tt>;</tt>" separator:
</p>
<pre>
Osin f440 t1
; f220 t1
</pre>
<p>This can also be done for an oscillator within a list.
</p>
<h3>Compared to SuperCollider</h3>
<p>This example for <a href="https://supercollider.github.io/">SuperCollider</a>
generates a sine wave (without actually playing it,
which requires a few additional details):
</p>
<pre>SinOsc.ar(440, 0, 0.5);</pre>
<p>In SAU, the closest-looking equivalent is:
</p>
<pre>Osin f440 p0 a0.5</pre>
<p>By itself, this is a carrier oscillator which will play for
the default time of 1 second. It could also be included in
a list of modulators, and will then be linked to a carrier
and play when the carrier does.
</p>
<p>In SAU, data cannot currently be held or combined without
specifying carrier oscillators which play.
</p>
<h2 id='numexp'>Numerical expressions</h2>
<p>Numbers can be specified with or without a decimal point.
Within parentheses, signs ("<tt>+</tt>" or "<tt>-</tt>"),
and arithmetic operators ("<tt>+</tt>", "<tt>-</tt>",
"<tt>*</tt>", "<tt>/</tt>", and "<tt>^</tt>") are allowed
&ndash; with whitespace freely placed.
Note that negative numbers require parentheses around them,
to enclose the sign.
</p>
<p>If a decimal point is used,
a leading "<tt>0</tt>" can be left out
&ndash; as in "<tt>.25</tt>".
</p>
<h2>Value slopes</h2>
<p>To "sweep" a parameter value along a trajectory,
a set of value slope parameters can be given instead of the usual number.
The usual number is used as the starting value for the trajectory,
and the parameter can be specified twice in order to provide both.
(This is currently supported for amplitude, frequency, and panning parameters.)
</p>
<p>The slope sub-parameters are as follows:
</p>
<ul>
<li><tt>v</tt> (Target value.)</li>
<li><tt>t</tt> (Time to reach target value. Defaults to time of oscillator.)</li>
<li><tt>c</tt> (Curve type:
	'<tt>hold</tt>', '<tt>lin</tt>', '<tt>exp</tt>', '<tt>log</tt>',
	'<tt>esd</tt>', or '<tt>lsd</tt>'.
	Defaults to '<tt>lin</tt>'.)</li>
</ul>
<p>For example, the following tone begins at 20 Hz
and rises exponentially to 20000 Hz, over 10 seconds:
</p>
<pre>Osin f20 f{v20000 cexp} t10 a0.25</pre>
<p>The exponential and logarithmic curves are
polynomial approximations with definite beginnings and ends,
rather than real exponential and logarithmic curves.
(The '<tt>log</tt>' curve also skips the below-zero part
of a real logarithmic curve, i.e. it really approximates
the mathematical function "log(1 + x)".)
These approximations have been tuned by ear to sound "smooth" and natural.
</p>
<p>The '<tt>esd</tt>' curve exponentially saturates and decays,
like a capacitor &ndash; this means an upside-down decay for the increase
(it increases like the '<tt>log</tt>' curve and
decreases like the '<tt>exp</tt>' curve).
This is natural-sounding behavior for envelope-like use.
The '<tt>lsd</tt>' curve behaves the opposite,
logarithmically saturating and decaying
(increasing like '<tt>exp</tt>' and decreasing like '<tt>log</tt>').
</p>
<h2>Comment syntax</h2>
<p>Following "<tt>//</tt>", the rest of a line is commented out.
</p>
<p>Following "<tt>/*</tt>", text is
commented out until "<tt>*/</tt>" has been read.
</p>
<p>Following "<tt>#</tt>", the rest of a line is commented out.
Note that this may change in future versions;
"<tt>#</tt>" may be given a more complex meaning.
</p>
<p>A "<tt>Q</tt>", by itself,
will "quit" &ndash; ending the script and commenting out all that follows it.
</p>
</body>
</html>
